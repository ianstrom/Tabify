{"ast":null,"code":"/**\n * Edge up to version 14, Firefox up to version 52, Safari up to version 9 and maybe other browsers\n * did not refuse to decode invalid parameters with a TypeError.\n */\nexport const createTestAudioContextDecodeAudioDataMethodTypeErrorSupport = nativeOfflineAudioContextConstructor => {\n  return () => {\n    if (nativeOfflineAudioContextConstructor === null) {\n      return Promise.resolve(false);\n    }\n    const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n    // Bug #21: Safari does not support promises yet.\n    return new Promise(resolve => {\n      let isPending = true;\n      const resolvePromise = err => {\n        if (isPending) {\n          isPending = false;\n          offlineAudioContext.startRendering();\n          resolve(err instanceof TypeError);\n        }\n      };\n      let promise;\n      // Bug #26: Safari throws a synchronous error.\n      try {\n        promise = offlineAudioContext\n        // Bug #1: Safari requires a successCallback.\n        .decodeAudioData(null, () => {\n          // Ignore the success callback.\n        }, resolvePromise);\n      } catch (err) {\n        resolvePromise(err);\n      }\n      // Bug #21: Safari does not support promises yet.\n      if (promise !== undefined) {\n        // Bug #6: Chrome, Edge and Firefox do not call the errorCallback.\n        promise.catch(resolvePromise);\n      }\n    });\n  };\n};","map":{"version":3,"names":["createTestAudioContextDecodeAudioDataMethodTypeErrorSupport","nativeOfflineAudioContextConstructor","Promise","resolve","offlineAudioContext","isPending","resolvePromise","err","startRendering","TypeError","promise","decodeAudioData","undefined","catch"],"sources":["/Users/ianstrom/Development/code/Capstone/node_modules/standardized-audio-context/src/factories/test-audio-context-decode-audio-data-method-type-error-support.ts"],"sourcesContent":["import { TTestAudioContextDecodeAudioDataMethodTypeErrorSupportFactory } from '../types';\n\n/**\n * Edge up to version 14, Firefox up to version 52, Safari up to version 9 and maybe other browsers\n * did not refuse to decode invalid parameters with a TypeError.\n */\nexport const createTestAudioContextDecodeAudioDataMethodTypeErrorSupport: TTestAudioContextDecodeAudioDataMethodTypeErrorSupportFactory = (\n    nativeOfflineAudioContextConstructor\n) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return Promise.resolve(false);\n        }\n\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n\n        // Bug #21: Safari does not support promises yet.\n        return new Promise((resolve) => {\n            let isPending = true;\n\n            const resolvePromise = (err: Error) => {\n                if (isPending) {\n                    isPending = false;\n\n                    offlineAudioContext.startRendering();\n\n                    resolve(err instanceof TypeError);\n                }\n            };\n\n            let promise;\n\n            // Bug #26: Safari throws a synchronous error.\n            try {\n                promise = offlineAudioContext\n                    // Bug #1: Safari requires a successCallback.\n                    .decodeAudioData(\n                        <any>null,\n                        () => {\n                            // Ignore the success callback.\n                        },\n                        resolvePromise\n                    );\n            } catch (err) {\n                resolvePromise(err);\n            }\n\n            // Bug #21: Safari does not support promises yet.\n            if (promise !== undefined) {\n                // Bug #6: Chrome, Edge and Firefox do not call the errorCallback.\n                promise.catch(resolvePromise);\n            }\n        });\n    };\n};\n"],"mappings":"AAEA;;;;AAIA,OAAO,MAAMA,2DAA2D,GACpEC,oCAAoC,IACpC;EACA,OAAO,MAAK;IACR,IAAIA,oCAAoC,KAAK,IAAI,EAAE;MAC/C,OAAOC,OAAO,CAACC,OAAO,CAAC,KAAK,CAAC;;IAGjC,MAAMC,mBAAmB,GAAG,IAAIH,oCAAoC,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC;IAEjF;IACA,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAI;MAC3B,IAAIE,SAAS,GAAG,IAAI;MAEpB,MAAMC,cAAc,GAAIC,GAAU,IAAI;QAClC,IAAIF,SAAS,EAAE;UACXA,SAAS,GAAG,KAAK;UAEjBD,mBAAmB,CAACI,cAAc,EAAE;UAEpCL,OAAO,CAACI,GAAG,YAAYE,SAAS,CAAC;;MAEzC,CAAC;MAED,IAAIC,OAAO;MAEX;MACA,IAAI;QACAA,OAAO,GAAGN;QACN;QAAA,CACCO,eAAe,CACP,IAAI,EACT,MAAK;UACD;QAAA,CACH,EACDL,cAAc,CACjB;OACR,CAAC,OAAOC,GAAG,EAAE;QACVD,cAAc,CAACC,GAAG,CAAC;;MAGvB;MACA,IAAIG,OAAO,KAAKE,SAAS,EAAE;QACvB;QACAF,OAAO,CAACG,KAAK,CAACP,cAAc,CAAC;;IAErC,CAAC,CAAC;EACN,CAAC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}