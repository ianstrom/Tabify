{"ast":null,"code":"export const createEvaluateSource = window => {\n  return source => new Promise((resolve, reject) => {\n    if (window === null) {\n      // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n      reject(new SyntaxError());\n      return;\n    }\n    const head = window.document.head;\n    if (head === null) {\n      // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n      reject(new SyntaxError());\n    } else {\n      const script = window.document.createElement('script');\n      // @todo Safari doesn't like URLs with a type of 'application/javascript; charset=utf-8'.\n      const blob = new Blob([source], {\n        type: 'application/javascript'\n      });\n      const url = URL.createObjectURL(blob);\n      const originalOnErrorHandler = window.onerror;\n      const removeErrorEventListenerAndRevokeUrl = () => {\n        window.onerror = originalOnErrorHandler;\n        URL.revokeObjectURL(url);\n      };\n      window.onerror = (message, src, lineno, colno, error) => {\n        // @todo Edge thinks the source is the one of the html document.\n        if (src === url || src === window.location.href && lineno === 1 && colno === 1) {\n          removeErrorEventListenerAndRevokeUrl();\n          reject(error);\n          return false;\n        }\n        if (originalOnErrorHandler !== null) {\n          return originalOnErrorHandler(message, src, lineno, colno, error);\n        }\n      };\n      script.onerror = () => {\n        removeErrorEventListenerAndRevokeUrl();\n        // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n        reject(new SyntaxError());\n      };\n      script.onload = () => {\n        removeErrorEventListenerAndRevokeUrl();\n        resolve();\n      };\n      script.src = url;\n      script.type = 'module';\n      head.appendChild(script);\n    }\n  });\n};","map":{"version":3,"names":["createEvaluateSource","window","source","Promise","resolve","reject","SyntaxError","head","document","script","createElement","blob","Blob","type","url","URL","createObjectURL","originalOnErrorHandler","onerror","removeErrorEventListenerAndRevokeUrl","revokeObjectURL","message","src","lineno","colno","error","location","href","onload","appendChild"],"sources":["/Users/ianstrom/Development/code/Capstone/client/node_modules/standardized-audio-context/src/factories/evaluate-source.ts"],"sourcesContent":["import { TEvaluateSourceFactory } from '../types';\n\nexport const createEvaluateSource: TEvaluateSourceFactory = (window) => {\n    return (source) =>\n        new Promise((resolve, reject) => {\n            if (window === null) {\n                // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                reject(new SyntaxError());\n\n                return;\n            }\n\n            const head = window.document.head;\n\n            if (head === null) {\n                // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                reject(new SyntaxError());\n            } else {\n                const script = window.document.createElement('script');\n                // @todo Safari doesn't like URLs with a type of 'application/javascript; charset=utf-8'.\n                const blob = new Blob([source], { type: 'application/javascript' });\n                const url = URL.createObjectURL(blob);\n\n                const originalOnErrorHandler = window.onerror;\n\n                const removeErrorEventListenerAndRevokeUrl = () => {\n                    window.onerror = originalOnErrorHandler;\n\n                    URL.revokeObjectURL(url);\n                };\n\n                window.onerror = (message, src, lineno, colno, error) => {\n                    // @todo Edge thinks the source is the one of the html document.\n                    if (src === url || (src === window.location.href && lineno === 1 && colno === 1)) {\n                        removeErrorEventListenerAndRevokeUrl();\n                        reject(error);\n\n                        return false;\n                    }\n\n                    if (originalOnErrorHandler !== null) {\n                        return originalOnErrorHandler(message, src, lineno, colno, error);\n                    }\n                };\n\n                script.onerror = () => {\n                    removeErrorEventListenerAndRevokeUrl();\n                    // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                    reject(new SyntaxError());\n                };\n                script.onload = () => {\n                    removeErrorEventListenerAndRevokeUrl();\n                    resolve();\n                };\n                script.src = url;\n                script.type = 'module';\n\n                head.appendChild(script);\n            }\n        });\n};\n"],"mappings":"AAEA,OAAO,MAAMA,oBAAoB,GAA4BC,MAAM,IAAI;EACnE,OAAQC,MAAM,IACV,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAI;IAC5B,IAAIJ,MAAM,KAAK,IAAI,EAAE;MACjB;MACAI,MAAM,CAAC,IAAIC,WAAW,EAAE,CAAC;MAEzB;;IAGJ,MAAMC,IAAI,GAAGN,MAAM,CAACO,QAAQ,CAACD,IAAI;IAEjC,IAAIA,IAAI,KAAK,IAAI,EAAE;MACf;MACAF,MAAM,CAAC,IAAIC,WAAW,EAAE,CAAC;KAC5B,MAAM;MACH,MAAMG,MAAM,GAAGR,MAAM,CAACO,QAAQ,CAACE,aAAa,CAAC,QAAQ,CAAC;MACtD;MACA,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAAC,CAACV,MAAM,CAAC,EAAE;QAAEW,IAAI,EAAE;MAAwB,CAAE,CAAC;MACnE,MAAMC,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACL,IAAI,CAAC;MAErC,MAAMM,sBAAsB,GAAGhB,MAAM,CAACiB,OAAO;MAE7C,MAAMC,oCAAoC,GAAGA,CAAA,KAAK;QAC9ClB,MAAM,CAACiB,OAAO,GAAGD,sBAAsB;QAEvCF,GAAG,CAACK,eAAe,CAACN,GAAG,CAAC;MAC5B,CAAC;MAEDb,MAAM,CAACiB,OAAO,GAAG,CAACG,OAAO,EAAEC,GAAG,EAAEC,MAAM,EAAEC,KAAK,EAAEC,KAAK,KAAI;QACpD;QACA,IAAIH,GAAG,KAAKR,GAAG,IAAKQ,GAAG,KAAKrB,MAAM,CAACyB,QAAQ,CAACC,IAAI,IAAIJ,MAAM,KAAK,CAAC,IAAIC,KAAK,KAAK,CAAE,EAAE;UAC9EL,oCAAoC,EAAE;UACtCd,MAAM,CAACoB,KAAK,CAAC;UAEb,OAAO,KAAK;;QAGhB,IAAIR,sBAAsB,KAAK,IAAI,EAAE;UACjC,OAAOA,sBAAsB,CAACI,OAAO,EAAEC,GAAG,EAAEC,MAAM,EAAEC,KAAK,EAAEC,KAAK,CAAC;;MAEzE,CAAC;MAEDhB,MAAM,CAACS,OAAO,GAAG,MAAK;QAClBC,oCAAoC,EAAE;QACtC;QACAd,MAAM,CAAC,IAAIC,WAAW,EAAE,CAAC;MAC7B,CAAC;MACDG,MAAM,CAACmB,MAAM,GAAG,MAAK;QACjBT,oCAAoC,EAAE;QACtCf,OAAO,EAAE;MACb,CAAC;MACDK,MAAM,CAACa,GAAG,GAAGR,GAAG;MAChBL,MAAM,CAACI,IAAI,GAAG,QAAQ;MAEtBN,IAAI,CAACsB,WAAW,CAACpB,MAAM,CAAC;;EAEhC,CAAC,CAAC;AACV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}