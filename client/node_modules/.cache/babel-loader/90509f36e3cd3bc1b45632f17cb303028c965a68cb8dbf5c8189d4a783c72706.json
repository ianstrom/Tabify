{"ast":null,"code":"import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nexport const createAudioListenerFactory = (createAudioParam, createNativeChannelMergerNode, createNativeConstantSourceNode, createNativeScriptProcessorNode, createNotSupportedError, getFirstSample, isNativeOfflineAudioContext, overwriteAccessors) => {\n  return (context, nativeContext) => {\n    const nativeListener = nativeContext.listener;\n    // Bug #117: Only Chrome & Edge support the new interface already.\n    const createFakeAudioParams = () => {\n      const buffer = new Float32Array(1);\n      const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n        channelCount: 1,\n        channelCountMode: 'explicit',\n        channelInterpretation: 'speakers',\n        numberOfInputs: 9\n      });\n      const isOffline = isNativeOfflineAudioContext(nativeContext);\n      let isScriptProcessorNodeCreated = false;\n      let lastOrientation = [0, 0, -1, 0, 1, 0];\n      let lastPosition = [0, 0, 0];\n      const createScriptProcessorNode = () => {\n        if (isScriptProcessorNodeCreated) {\n          return;\n        }\n        isScriptProcessorNodeCreated = true;\n        const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 9, 0);\n        // tslint:disable-next-line:deprecation\n        scriptProcessorNode.onaudioprocess = _ref => {\n          let {\n            inputBuffer\n          } = _ref;\n          const orientation = [getFirstSample(inputBuffer, buffer, 0), getFirstSample(inputBuffer, buffer, 1), getFirstSample(inputBuffer, buffer, 2), getFirstSample(inputBuffer, buffer, 3), getFirstSample(inputBuffer, buffer, 4), getFirstSample(inputBuffer, buffer, 5)];\n          if (orientation.some((value, index) => value !== lastOrientation[index])) {\n            nativeListener.setOrientation(...orientation); // tslint:disable-line:deprecation\n            lastOrientation = orientation;\n          }\n          const positon = [getFirstSample(inputBuffer, buffer, 6), getFirstSample(inputBuffer, buffer, 7), getFirstSample(inputBuffer, buffer, 8)];\n          if (positon.some((value, index) => value !== lastPosition[index])) {\n            nativeListener.setPosition(...positon); // tslint:disable-line:deprecation\n            lastPosition = positon;\n          }\n        };\n        channelMergerNode.connect(scriptProcessorNode);\n      };\n      const createSetOrientation = index => value => {\n        if (value !== lastOrientation[index]) {\n          lastOrientation[index] = value;\n          nativeListener.setOrientation(...lastOrientation); // tslint:disable-line:deprecation\n        }\n      };\n\n      const createSetPosition = index => value => {\n        if (value !== lastPosition[index]) {\n          lastPosition[index] = value;\n          nativeListener.setPosition(...lastPosition); // tslint:disable-line:deprecation\n        }\n      };\n\n      const createFakeAudioParam = (input, initialValue, setValue) => {\n        const constantSourceNode = createNativeConstantSourceNode(nativeContext, {\n          channelCount: 1,\n          channelCountMode: 'explicit',\n          channelInterpretation: 'discrete',\n          offset: initialValue\n        });\n        constantSourceNode.connect(channelMergerNode, 0, input);\n        // @todo This should be stopped when the context is closed.\n        constantSourceNode.start();\n        Object.defineProperty(constantSourceNode.offset, 'defaultValue', {\n          get() {\n            return initialValue;\n          }\n        });\n        /*\n         * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and\n         * minValue for GainNodes.\n         */\n        const audioParam = createAudioParam({\n          context\n        }, isOffline, constantSourceNode.offset, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n        overwriteAccessors(audioParam, 'value', get => () => get.call(audioParam), set => value => {\n          try {\n            set.call(audioParam, value);\n          } catch (err) {\n            if (err.code !== 9) {\n              throw err;\n            }\n          }\n          createScriptProcessorNode();\n          if (isOffline) {\n            // Bug #117: Using setOrientation() and setPosition() doesn't work with an OfflineAudioContext.\n            setValue(value);\n          }\n        });\n        audioParam.cancelAndHoldAtTime = (cancelAndHoldAtTime => {\n          if (isOffline) {\n            return () => {\n              throw createNotSupportedError();\n            };\n          }\n          return function () {\n            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n              args[_key] = arguments[_key];\n            }\n            const value = cancelAndHoldAtTime.apply(audioParam, args);\n            createScriptProcessorNode();\n            return value;\n          };\n        })(audioParam.cancelAndHoldAtTime);\n        audioParam.cancelScheduledValues = (cancelScheduledValues => {\n          if (isOffline) {\n            return () => {\n              throw createNotSupportedError();\n            };\n          }\n          return function () {\n            for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n              args[_key2] = arguments[_key2];\n            }\n            const value = cancelScheduledValues.apply(audioParam, args);\n            createScriptProcessorNode();\n            return value;\n          };\n        })(audioParam.cancelScheduledValues);\n        audioParam.exponentialRampToValueAtTime = (exponentialRampToValueAtTime => {\n          if (isOffline) {\n            return () => {\n              throw createNotSupportedError();\n            };\n          }\n          return function () {\n            for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n              args[_key3] = arguments[_key3];\n            }\n            const value = exponentialRampToValueAtTime.apply(audioParam, args);\n            createScriptProcessorNode();\n            return value;\n          };\n        })(audioParam.exponentialRampToValueAtTime);\n        audioParam.linearRampToValueAtTime = (linearRampToValueAtTime => {\n          if (isOffline) {\n            return () => {\n              throw createNotSupportedError();\n            };\n          }\n          return function () {\n            for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n              args[_key4] = arguments[_key4];\n            }\n            const value = linearRampToValueAtTime.apply(audioParam, args);\n            createScriptProcessorNode();\n            return value;\n          };\n        })(audioParam.linearRampToValueAtTime);\n        audioParam.setTargetAtTime = (setTargetAtTime => {\n          if (isOffline) {\n            return () => {\n              throw createNotSupportedError();\n            };\n          }\n          return function () {\n            for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n              args[_key5] = arguments[_key5];\n            }\n            const value = setTargetAtTime.apply(audioParam, args);\n            createScriptProcessorNode();\n            return value;\n          };\n        })(audioParam.setTargetAtTime);\n        audioParam.setValueAtTime = (setValueAtTime => {\n          if (isOffline) {\n            return () => {\n              throw createNotSupportedError();\n            };\n          }\n          return function () {\n            for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n              args[_key6] = arguments[_key6];\n            }\n            const value = setValueAtTime.apply(audioParam, args);\n            createScriptProcessorNode();\n            return value;\n          };\n        })(audioParam.setValueAtTime);\n        audioParam.setValueCurveAtTime = (setValueCurveAtTime => {\n          if (isOffline) {\n            return () => {\n              throw createNotSupportedError();\n            };\n          }\n          return function () {\n            for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n              args[_key7] = arguments[_key7];\n            }\n            const value = setValueCurveAtTime.apply(audioParam, args);\n            createScriptProcessorNode();\n            return value;\n          };\n        })(audioParam.setValueCurveAtTime);\n        return audioParam;\n      };\n      return {\n        forwardX: createFakeAudioParam(0, 0, createSetOrientation(0)),\n        forwardY: createFakeAudioParam(1, 0, createSetOrientation(1)),\n        forwardZ: createFakeAudioParam(2, -1, createSetOrientation(2)),\n        positionX: createFakeAudioParam(6, 0, createSetPosition(0)),\n        positionY: createFakeAudioParam(7, 0, createSetPosition(1)),\n        positionZ: createFakeAudioParam(8, 0, createSetPosition(2)),\n        upX: createFakeAudioParam(3, 0, createSetOrientation(3)),\n        upY: createFakeAudioParam(4, 1, createSetOrientation(4)),\n        upZ: createFakeAudioParam(5, 0, createSetOrientation(5))\n      };\n    };\n    const {\n      forwardX,\n      forwardY,\n      forwardZ,\n      positionX,\n      positionY,\n      positionZ,\n      upX,\n      upY,\n      upZ\n    } = nativeListener.forwardX === undefined ? createFakeAudioParams() : nativeListener;\n    return {\n      get forwardX() {\n        return forwardX;\n      },\n      get forwardY() {\n        return forwardY;\n      },\n      get forwardZ() {\n        return forwardZ;\n      },\n      get positionX() {\n        return positionX;\n      },\n      get positionY() {\n        return positionY;\n      },\n      get positionZ() {\n        return positionZ;\n      },\n      get upX() {\n        return upX;\n      },\n      get upY() {\n        return upY;\n      },\n      get upZ() {\n        return upZ;\n      }\n    };\n  };\n};","map":{"version":3,"names":["MOST_NEGATIVE_SINGLE_FLOAT","MOST_POSITIVE_SINGLE_FLOAT","createAudioListenerFactory","createAudioParam","createNativeChannelMergerNode","createNativeConstantSourceNode","createNativeScriptProcessorNode","createNotSupportedError","getFirstSample","isNativeOfflineAudioContext","overwriteAccessors","context","nativeContext","nativeListener","listener","createFakeAudioParams","buffer","Float32Array","channelMergerNode","channelCount","channelCountMode","channelInterpretation","numberOfInputs","isOffline","isScriptProcessorNodeCreated","lastOrientation","lastPosition","createScriptProcessorNode","scriptProcessorNode","onaudioprocess","_ref","inputBuffer","orientation","some","value","index","setOrientation","positon","setPosition","connect","createSetOrientation","createSetPosition","createFakeAudioParam","input","initialValue","setValue","constantSourceNode","offset","start","Object","defineProperty","get","audioParam","call","set","err","code","cancelAndHoldAtTime","_len","arguments","length","args","Array","_key","apply","cancelScheduledValues","_len2","_key2","exponentialRampToValueAtTime","_len3","_key3","linearRampToValueAtTime","_len4","_key4","setTargetAtTime","_len5","_key5","setValueAtTime","_len6","_key6","setValueCurveAtTime","_len7","_key7","forwardX","forwardY","forwardZ","positionX","positionY","positionZ","upX","upY","upZ","undefined"],"sources":["/Users/ianstrom/Development/code/Capstone/node_modules/standardized-audio-context/src/factories/audio-listener-factory.ts"],"sourcesContent":["import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { IAudioParam } from '../interfaces';\nimport { TAudioListenerFactoryFactory } from '../types';\n\nexport const createAudioListenerFactory: TAudioListenerFactoryFactory = (\n    createAudioParam,\n    createNativeChannelMergerNode,\n    createNativeConstantSourceNode,\n    createNativeScriptProcessorNode,\n    createNotSupportedError,\n    getFirstSample,\n    isNativeOfflineAudioContext,\n    overwriteAccessors\n) => {\n    return (context, nativeContext) => {\n        const nativeListener = nativeContext.listener;\n\n        // Bug #117: Only Chrome & Edge support the new interface already.\n        const createFakeAudioParams = () => {\n            const buffer = new Float32Array(1);\n            const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n                channelCount: 1,\n                channelCountMode: 'explicit',\n                channelInterpretation: 'speakers',\n                numberOfInputs: 9\n            });\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n\n            let isScriptProcessorNodeCreated = false;\n            let lastOrientation: [number, number, number, number, number, number] = [0, 0, -1, 0, 1, 0];\n            let lastPosition: [number, number, number] = [0, 0, 0];\n\n            const createScriptProcessorNode = () => {\n                if (isScriptProcessorNodeCreated) {\n                    return;\n                }\n\n                isScriptProcessorNodeCreated = true;\n\n                const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 9, 0);\n\n                // tslint:disable-next-line:deprecation\n                scriptProcessorNode.onaudioprocess = ({ inputBuffer }) => {\n                    const orientation: [number, number, number, number, number, number] = [\n                        getFirstSample(inputBuffer, buffer, 0),\n                        getFirstSample(inputBuffer, buffer, 1),\n                        getFirstSample(inputBuffer, buffer, 2),\n                        getFirstSample(inputBuffer, buffer, 3),\n                        getFirstSample(inputBuffer, buffer, 4),\n                        getFirstSample(inputBuffer, buffer, 5)\n                    ];\n\n                    if (orientation.some((value, index) => value !== lastOrientation[index])) {\n                        nativeListener.setOrientation(...orientation); // tslint:disable-line:deprecation\n\n                        lastOrientation = orientation;\n                    }\n\n                    const positon: [number, number, number] = [\n                        getFirstSample(inputBuffer, buffer, 6),\n                        getFirstSample(inputBuffer, buffer, 7),\n                        getFirstSample(inputBuffer, buffer, 8)\n                    ];\n\n                    if (positon.some((value, index) => value !== lastPosition[index])) {\n                        nativeListener.setPosition(...positon); // tslint:disable-line:deprecation\n\n                        lastPosition = positon;\n                    }\n                };\n\n                channelMergerNode.connect(scriptProcessorNode);\n            };\n            const createSetOrientation = (index: number) => (value: number) => {\n                if (value !== lastOrientation[index]) {\n                    lastOrientation[index] = value;\n\n                    nativeListener.setOrientation(...lastOrientation); // tslint:disable-line:deprecation\n                }\n            };\n            const createSetPosition = (index: number) => (value: number) => {\n                if (value !== lastPosition[index]) {\n                    lastPosition[index] = value;\n\n                    nativeListener.setPosition(...lastPosition); // tslint:disable-line:deprecation\n                }\n            };\n            const createFakeAudioParam = (input: number, initialValue: number, setValue: (value: number) => void) => {\n                const constantSourceNode = createNativeConstantSourceNode(nativeContext, {\n                    channelCount: 1,\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    offset: initialValue\n                });\n\n                constantSourceNode.connect(channelMergerNode, 0, input);\n\n                // @todo This should be stopped when the context is closed.\n                constantSourceNode.start();\n\n                Object.defineProperty(constantSourceNode.offset, 'defaultValue', {\n                    get(): number {\n                        return initialValue;\n                    }\n                });\n\n                /*\n                 * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and\n                 * minValue for GainNodes.\n                 */\n                const audioParam = createAudioParam(\n                    <any>{ context },\n                    isOffline,\n                    constantSourceNode.offset,\n                    MOST_POSITIVE_SINGLE_FLOAT,\n                    MOST_NEGATIVE_SINGLE_FLOAT\n                );\n\n                overwriteAccessors(\n                    audioParam,\n                    'value',\n                    (get) => () => get.call(audioParam),\n                    (set) => (value) => {\n                        try {\n                            set.call(audioParam, value);\n                        } catch (err) {\n                            if (err.code !== 9) {\n                                throw err;\n                            }\n                        }\n\n                        createScriptProcessorNode();\n\n                        if (isOffline) {\n                            // Bug #117: Using setOrientation() and setPosition() doesn't work with an OfflineAudioContext.\n                            setValue(value);\n                        }\n                    }\n                );\n\n                audioParam.cancelAndHoldAtTime = ((cancelAndHoldAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['cancelAndHoldAtTime']>) => {\n                        const value = cancelAndHoldAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.cancelAndHoldAtTime);\n                audioParam.cancelScheduledValues = ((cancelScheduledValues) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['cancelScheduledValues']>) => {\n                        const value = cancelScheduledValues.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.cancelScheduledValues);\n                audioParam.exponentialRampToValueAtTime = ((exponentialRampToValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['exponentialRampToValueAtTime']>) => {\n                        const value = exponentialRampToValueAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.exponentialRampToValueAtTime);\n                audioParam.linearRampToValueAtTime = ((linearRampToValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['linearRampToValueAtTime']>) => {\n                        const value = linearRampToValueAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.linearRampToValueAtTime);\n                audioParam.setTargetAtTime = ((setTargetAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['setTargetAtTime']>) => {\n                        const value = setTargetAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.setTargetAtTime);\n                audioParam.setValueAtTime = ((setValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['setValueAtTime']>) => {\n                        const value = setValueAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.setValueAtTime);\n                audioParam.setValueCurveAtTime = ((setValueCurveAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n\n                    return (...args: Parameters<IAudioParam['setValueCurveAtTime']>) => {\n                        const value = setValueCurveAtTime.apply(audioParam, args);\n\n                        createScriptProcessorNode();\n\n                        return value;\n                    };\n                })(audioParam.setValueCurveAtTime);\n\n                return audioParam;\n            };\n\n            return {\n                forwardX: createFakeAudioParam(0, 0, createSetOrientation(0)),\n                forwardY: createFakeAudioParam(1, 0, createSetOrientation(1)),\n                forwardZ: createFakeAudioParam(2, -1, createSetOrientation(2)),\n                positionX: createFakeAudioParam(6, 0, createSetPosition(0)),\n                positionY: createFakeAudioParam(7, 0, createSetPosition(1)),\n                positionZ: createFakeAudioParam(8, 0, createSetPosition(2)),\n                upX: createFakeAudioParam(3, 0, createSetOrientation(3)),\n                upY: createFakeAudioParam(4, 1, createSetOrientation(4)),\n                upZ: createFakeAudioParam(5, 0, createSetOrientation(5))\n            };\n        };\n\n        const { forwardX, forwardY, forwardZ, positionX, positionY, positionZ, upX, upY, upZ } =\n            nativeListener.forwardX === undefined ? createFakeAudioParams() : nativeListener;\n\n        return {\n            get forwardX(): IAudioParam {\n                return forwardX;\n            },\n            get forwardY(): IAudioParam {\n                return forwardY;\n            },\n            get forwardZ(): IAudioParam {\n                return forwardZ;\n            },\n            get positionX(): IAudioParam {\n                return positionX;\n            },\n            get positionY(): IAudioParam {\n                return positionY;\n            },\n            get positionZ(): IAudioParam {\n                return positionZ;\n            },\n            get upX(): IAudioParam {\n                return upX;\n            },\n            get upY(): IAudioParam {\n                return upY;\n            },\n            get upZ(): IAudioParam {\n                return upZ;\n            }\n        };\n    };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}